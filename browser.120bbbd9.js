var e={};e=import.meta.resolve("fGekV");class t{constructor(e,t=3){this.imageData=e,this.width=e.width,this.height=e.height,this.kernelSize=t,this.grayscaleData=this.convertToGrayscale(e)}pixelAt(e,t,a,d=0){return t<0||t>=this.width||a<0||a>=this.height?0:e[(a*this.width+t)*4+d]}convertToGrayscale(e){let t=new Uint8ClampedArray(this.width*this.height*4),a=e.data;for(let e=0;e<a.length;e+=4){let d=(a[e]+a[e+1]+a[e+2])/3;t[e]=t[e+1]=t[e+2]=d,t[e+3]=255}return t}apply(e="magnitude"){let a=new Uint8ClampedArray(this.width*this.height*4),d=Math.floor(this.kernelSize/2),n=3===this.kernelSize?t.kernelX3:t.kernelX5,i=3===this.kernelSize?t.kernelY3:t.kernelY5;for(let t=0;t<this.height;t++)for(let l=0;l<this.width;l++){let r,s=0,o=0;for(let e=-d;e<=d;e++)for(let a=-d;a<=d;a++){let r=l+a,h=t+e,c=n[e+d][a+d],g=i[e+d][a+d],m=this.pixelAt(this.grayscaleData,r,h);s+=m*c,o+=m*g}switch(e){case"x":r=Math.abs(s);break;case"y":r=Math.abs(o);break;case"direction":r=(Math.atan2(o,s)+Math.PI)/(2*Math.PI)*255;break;default:r=Math.sqrt(s*s+o*o)}let h=(t*this.width+l)*4;a[h]=a[h+1]=a[h+2]=r,a[h+3]=255}return t.imageDataFactory.create(a,this.width,this.height)}}t.imageDataFactory="undefined"!=typeof ImageData?new class e{create(e,t,a){if("undefined"!=typeof ImageData)return new ImageData(e,t,a);throw Error("ImageData is not supported in this environment")}}:new class e{create(e,t,a){return{data:e,width:t,height:a,colorSpace:"srgb"}}},t.kernelX3=[[-1,0,1],[-2,0,2],[-1,0,1]],t.kernelY3=[[-1,-2,-1],[0,0,0],[1,2,1]],t.kernelX5=[[-1,-2,0,2,1],[-4,-8,0,8,4],[-6,-12,0,12,6],[-4,-8,0,8,4],[-1,-2,0,2,1]],t.kernelY5=[[-1,-4,-6,-4,-1],[-2,-8,-12,-8,-2],[0,0,0,0,0],[2,8,12,8,2],[1,4,6,4,1]],document.addEventListener("DOMContentLoaded",()=>{var a;let d=document.getElementById("imageUpload"),n=document.getElementById("originalCanvas"),i=document.getElementById("sobelCanvas"),l=document.getElementById("processButton"),r=document.getElementById("outputFormat"),s=document.getElementById("scale"),o=document.getElementById("scaleValue"),h=document.getElementById("fileName"),c=document.getElementById("dropZone"),g=document.getElementById("originalPlaceholder"),m=document.getElementById("edgePlaceholder"),u=document.getElementById("processingIndicator"),v=document.getElementById("downloadOriginal"),p=document.getElementById("downloadEdges"),w=document.getElementById("kernelSize"),f=null;function y(){let e=d.files[0];if(e&&e.type.match("image.*")){h.textContent=e.name;let t=new FileReader;t.onload=e=>{let t=new Image;t.onload=()=>{n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0),n.classList.remove("hidden"),g.classList.add("hidden"),l.disabled=!1,v.disabled=!1,f=t},t.src=e.target.result},t.readAsDataURL(e)}}function I(e,t){let a=document.createElement("a");a.download=t,a.href=e.toDataURL("image/png"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}s.addEventListener("input",()=>{o.textContent=s.value}),d.addEventListener("change",y),c.addEventListener("dragover",e=>{e.preventDefault(),c.classList.add("drag-over")}),c.addEventListener("dragleave",()=>{c.classList.remove("drag-over")}),c.addEventListener("drop",e=>{e.preventDefault(),c.classList.remove("drag-over"),e.dataTransfer.files.length&&(d.files=e.dataTransfer.files,y())}),l.addEventListener("click",function(){if(!f)return;i.classList.add("hidden"),m.classList.add("hidden"),u.classList.remove("hidden"),p.disabled=!0;let e={outputFormat:r.value,kernelSize:parseInt(w.value,10),scale:parseFloat(s.value)};(function(e,a,d){a.width=e.width,a.height=e.height;let n=a.getContext("2d");n.drawImage(e,0,0);let i=new t(n.getImageData(0,0,a.width,a.height),d.kernelSize).apply(d.outputFormat),l=i.data;for(let e=0;e<l.length;e+=4)l[e]=Math.min(255,l[e]*d.scale),l[e+1]=Math.min(255,l[e+1]*d.scale),l[e+2]=Math.min(255,l[e+2]*d.scale);n.putImageData(i,0,0)})(f,i,e),u.classList.add("hidden"),i.classList.remove("hidden"),p.disabled=!1}),v.addEventListener("click",()=>{I(n,"original-image.png")}),p.addEventListener("click",()=>{I(i,"edge-detection.png")});let E=new Image;E.onload=()=>{n.width=E.width,n.height=E.height,n.getContext("2d").drawImage(E,0,0),n.classList.remove("hidden"),g.classList.add("hidden"),l.disabled=!1,v.disabled=!1,f=E},E.src=(a=e)&&a.__esModule?a.default:a});
//# sourceMappingURL=browser.120bbbd9.js.map
